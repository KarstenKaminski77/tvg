<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Get Latitude/Longitude</title>
    <style>
        header, main { padding-left: 2em; }
        .alert {  margin-top: 1em;  margin-bottom: 1em;  padding: 1em;  background-color: red;  color: white;}
        .d-none { display: none; }
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>
<body>
<header>
    <h1>Get Latitude/Longitude</h1>

</header>
<main>
    <button onclick="displayOnMap();">Display on Map</button>
    <p>Timestamp: <span id="timestamp"></span></p>
    <p>Latitude: <span id="lat"></span></p>
    <p>Longitude: <span id="long"></span></p>
    <p>Lat/Long Accuracy (meters): <span id="accuracy"></span></p>
    <p>Altitude (meters above sea level): <span id="altitude"></span></p>
    <p>Altitude Accuracy (meters): <span id="altitudeaccuracy"></span></p>
    <p>Heading (Degress from true north): <span id="heading"></span></p>
    <p>Speed (meters/second): <span id="speed"></span></p>
    <div id="errorArea" class="alert d-none"> </div>
</main>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"> </script>
<script src="{{ asset('js/geo_map.js') }}" type="text/javascript"></script>
<script>
    'use strict';

    $(document).ready(function () {
        geoController.getCurrentPosition(displayPosition, displayError);
    });

    function displayPosition(pos) {
        let coords = pos.coords;
        $("#timestamp").text(new Date(pos.timestamp));
        $("#lat").text(coords.latitude);
        $("#long").text(coords.longitude);
        $("#accuracy").text(coords.accuracy);
        $("#altitude").text(coords.altitude ?? "n/a");
        $("#altitudeaccuracy").text(coords.altitudeAccuracy ?? "n/a");
        $("#heading").text(coords.heading ?? "n/a");
        $("#speed").text(coords.speed ?? "n/a");
    }

    function displayError(msg) {
        $("#errorArea").removeClass("d-none");
        $("#errorArea").html(msg);
    }

    function displayOnMap() {
        let coords = geoController.getPosition().coords;
        console.log(coords);
        window.location.href = 'https://google.com/maps?q='+ coords.latitude +', '+ coords.longitude;
    }
</script>
</body>
</html>